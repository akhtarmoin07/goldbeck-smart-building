# gitops/oauth2-proxy/values.yaml
extraArgs:
  provider: "oidc"
  oidc-issuer-url: "https://login.microsoftonline.com/81540043-6291-4469-ab7a-5686f6113819/v2.0"
  redirect-url: "http://localhost:8080/oauth2/callback"
  email-domain: "*"
  upstream: "file:///dev/null"
  http-address: "0.0.0.0:4180"

# This block BREAKS the loop by giving /oauth2 its own door
ingress:
  enabled: true
  className: nginx
  path: /oauth2
  pathType: Prefix
  hosts:
    - localhost
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "false"